/*
 * Copyright 2016-2019 NXP Semiconductors
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 */

/dts-v1/;
#include "ls1021a.dtsi"

/ {
	model = "LS1021A TSN Board";

	sys_mclk: clock-mclk {
		compatible = "fixed-clock";
		#clock-cells = <0>;
		clock-frequency = <24576000>;
	};

	regulators {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <0>;

		reg_3p3v: regulator@0 {
			compatible = "regulator-fixed";
			reg = <0>;
			regulator-name = "3P3V";
			regulator-min-microvolt = <3300000>;
			regulator-max-microvolt = <3300000>;
			regulator-always-on;
		};

		reg_2p5v: regulator@1 {
			compatible = "regulator-fixed";
			reg = <1>;
			regulator-name = "2P5V";
			regulator-min-microvolt = <2500000>;
			regulator-max-microvolt = <2500000>;
			regulator-always-on;
		};
	};

	firmware {
		optee {
			compatible = "linaro,optee-tz";
			method = "smc";
		};
	};
};

&uart0 {
	status = "okay";
};

&enet0 {
	tbi-handle = <&tbi0>;
	phy-handle = <&sgmii_phy2>;
	phy-connection-type = "sgmii";
	status = "ok";
};

&enet1 {
	tbi-handle = <&tbi1>;
	phy-handle = <&sgmii_phy1>;
	phy-connection-type = "sgmii";
	status = "ok";
};

&enet2 {
	phy-connection-type = "rgmii";
	status = "ok";
	fixed-link {
		speed = <1000>;
		full-duplex;
	};
};

&esdhc {
	status = "okay";
};

&i2c0 {
	status = "okay";

	codec: sgtl5000@2a {
		#sound-dai-cells = <0>;
		compatible = "fsl,sgtl5000";
		reg = <0x2a>;
		VDDA-supply = <&reg_3p3v>;
		VDDIO-supply = <&reg_2p5v>;
		clocks = <&sys_mclk>;
	};

	ina220@44 {
		compatible = "ti,ina220";
		reg = <0x44>;
		shunt-resistor = <1000>;
	};
	ina220@45 {
		compatible = "ti,ina220";
		reg = <0x45>;
		shunt-resistor = <1000>;
	};
	lm75b@48 {
		compatible = "nxp,lm75a";
		reg = <0x48>;
        };
	adt7461a@4c {
		compatible = "adt7461a";
		reg = <0x4c>;
	};
};

&i2c1 {
	status = "disabled";
};

&ifc {
	status = "disabled";
};

&lpuart0 {
	status = "okay";
};
&lpuart3 {
	status = "okay";
};

&mdio0 {
	/* AR8031 */
	sgmii_phy1: ethernet-phy@1 {
		reg = <0x1>;
	};
	/* AR8031 */
	sgmii_phy2: ethernet-phy@2 {
		reg = <0x2>;
	};
	/* BCM5464 */
	rgmii_phy3: ethernet-phy@3 {
		reg = <0x3>;
	};
	rgmii_phy4: ethernet-phy@4 {
		reg = <0x4>;
	};
	rgmii_phy5: ethernet-phy@5 {
		reg = <0x5>;
	};
	rgmii_phy6: ethernet-phy@6 {
		reg = <0x6>;
	};
	tbi0: tbi-phy@1f {
		reg = <0x1f>;
		device_type = "tbi-phy";
	};
};

&mdio1 {
	tbi1: tbi-phy@1f {
		reg = <0x1f>;
		device_type = "tbi-phy";
	};
};

&dspi0 {
	bus-num = <0>;
	status = "okay";
	num-cs = <3>;
	is-decoded-cs = <0>;
	spidev@0 {
		compatible = "rohm,dh2228fv";
		reg = <0x0>;
		spi-max-frequency = <4000000>;
		#address-cells = <1>;
		#size-cells = <1>;
	};
	sja1105@1 {
		reg = <0x1>;
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "nxp,sja1105";
		spi-max-frequency = <4000000>;
		fsl,spi-cs-sck-delay = <1000>;
		fsl,spi-sck-cs-delay = <1000>;
		ports {
			#address-cells = <1>;
			#size-cells = <0>;
			port@0 {
				/* ETH5 written on chassis */
				label = "swp5";
				phy-handle = <&rgmii_phy6>;
				phy-mode = "rgmii";
				reg = <0>;
			};
			port@1 {
				/* ETH2 written on chassis */
				label = "swp2";
				phy-handle = <&rgmii_phy3>;
				phy-mode = "rgmii";
				reg = <1>;
			};
			port@2 {
				/* ETH3 written on chassis */
				label = "swp3";
				phy-handle = <&rgmii_phy4>;
				phy-mode = "rgmii";
				reg = <2>;
			};
			port@3 {
				/* ETH4 written on chassis */
				phy-handle = <&rgmii_phy5>;
				label = "swp4";
				phy-mode = "rgmii";
				reg = <3>;
			};
			port@4 {
				/* Internal port connected to eth2 */
				ethernet = <&enet2>;
				phy-mode = "rgmii";
				reg = <4>;
				fixed-link {
					speed = <1000>;
					full-duplex;
				};
			};
		};
	};
	spidev@2 {
		compatible = "rohm,dh2228fv";
		reg = <0x2>;
		spi-max-frequency = <4000000>;
		#address-cells = <1>;
		#size-cells = <1>;
	};
	spidev@4 {
		compatible = "rohm,dh2228fv";
		reg = <0x4>;
		spi-max-frequency = <4000000>;
		#address-cells = <1>;
		#size-cells = <1>;
	};
};

&qspi {
	num-cs = <2>;
	status = "okay";

	qflash0: s25fl128s@0 {
		compatible = "spansion,s25fl129p1";
		#address-cells = <1>;
		#size-cells = <1>;
		spi-max-frequency = <20000000>;
		reg = <0>;
	};
};

&sai2 {
	status = "okay";
};

&sata {
	status = "okay";
};

